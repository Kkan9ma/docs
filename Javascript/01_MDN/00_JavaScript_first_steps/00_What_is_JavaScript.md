## 00 What is JavaScript?

* [원문 링크](https://developer.mozilla.org/ko/docs/Learn/JavaScript/First_steps/What_is_JavaScript)

---

### 스크랩

#### 웹 페이지에서 JavaScript는 어떤 일을 하나요?
* 자바스크립트는 HTML과 CSS가 결합되고 웹페이지 상에서 올려진 후, 브라우저의 자바스크립트 엔진에 의해 실행됩니다. 이는 페이지의 구조와 스타일등을 정해놓고, 자바스크립트가 실행된다는 것과 같은 의미입니다.


##### 브라우저 보안성
* 각각의 브라우저 탭들은 코드가 실행되는 개별적인 구성(이러한 것은 "실행 환경"이라고 지칭한다)입니다. 이는 각 탭의 대부분의 경우는 완전히 독립적이고, 하나의 탭의 코드는 다른 탭이나 웹사이트에 직접적으로 영향을 줄 수 없다는 의미입니다 . 이는 보안성에 좋은 방법입니다. 만약 이러한 부분이 없다면, 해커들이 다른 웹사이트로 부터 정보를 가로채는 등 악랄한 짓들을 할 수 있습니다.

##### 해석형 언어와 컴파일러형 언어
* 프로그래밍을 하는 입장에서 인터프리트와 컴파일이라는 개념에 대해서는 들어보았을 것입니다. 자바스크립트는 해석형 언어입니다. 따라서 코드가 위에서 아래로 순차적으로 실행되고 그 즉시 결과가 반환됩니다. 브라우저에서 동작하기 전에 다른 방식으로 코드를 변환할 필요가 없습니다.

* 반면에 컴파일러형 언어는 컴퓨터에 의해 동작되기전 다른 형식으로 변환하는 언어입니다. 예를 들면 C/C++과 같은 언어는 어셈블리어로 컴파일되어 동작됩니다.

##### 서버측 코드와 클라이언트측 코드
* 웹 개발 맥락에서 서버측과 클라이언트측 코드에 대해 들어보았을 것입니다. 클라이언트측 코드란 사용자의 컴퓨터에서 작동되는 코드입니다. 만약 웹페이지를 보고자 한다면, 클라이언트측 코드가 사용자의 컴퓨터로 다운로드되고 브라우저가 이를 표시합니다. 이러한 자바스크립트 모듈을 정확히는 클라이언트측 자바스크립트라고 합니다.

---

### 이해하기 어려웠던 부분
#### 1. async 속성 사용이 필요한 이유

* ... 외부 자바스크립트 예제에서는 좀더 최신의 자바스크립트 문법인 async 속성을 사용하게 됩니다. 일반적으로 HTML요소를 로딩하는 중 `<scirpt>`태그를 만나면 JavaScript의 내용이 모두 다운될 때까지 HTML로딩은 멈추게 되는데, async요소는 비동기방식으로 `<script>` 태그에 도달했을 때 브라우저에게 HTML 요소를 멈추지 않고 다운받도록 유지시킵니다.
            
* 이전 방식은 scirpt 요소를 body태그의 맨 끝에 넣는 방법이었습니다(</body> 바로 위에). 이 방식을 사용해도 body태그가 모두 로드된 이후 scirpt가 실행되게 만들 수 있습니다. 문제는 이 방법과 DOMContentLoaded를 이용한 방법 모두 HTML DOM이 로드되기 전까지 script의 로딩과 파싱이 완전히 차단된다는 것입다. 이는 많은 자바스크립트 코드를 다루는 규모가 큰 사이트의 경우 사이트를 느리게 만드는 중요한 성능 문제를 야기할 수 있습니다. 이것이 async 속성을 사용해야 하는 이유입니다!

#### 2. async & defer

* async 스크립트는 페이지 렌더링의 중단 없이 스크립트를 다운로드 하고, 또한 스크립트의 다운로드가 끝나자 마자 이를 실행시킵니다. async는 외부 스크립트끼리의 구체적인 실행 순서는 보장하지 않고, 단지 나머지 페이지가 나타나는 동안 스크립트가 비동기방식으로 다운로드 되어 중단되지 않는다는 것만 보장합니다. async는 각각의 스크립트가 독립적으로, 서로에게 의존하지 않는 관계일 때 적절합니다.


            <script async src="js/vendor/jquery.js"></script>
            <script async src="js/script2.js"></script>
            <script async src="js/script3.js"></script>

* 3개의 스크립트를 로딩하지만 이들의 순서는 보장할 수 없습니다. 이는 script2.js나 script3.js에 있는 함수가 jquery.js의 함수를 사용한다면 에러를 발생될 수 있다는 것을 의미합니다.

* Defer는 이와 다르게 순서대로 다운로드 한 후 모든 스크립트와 내용이 다운로드 되었을 때 실행됩니다:

            <script defer src="js/vendor/jquery.js"></script>
            <script defer src="js/script2.js"></script>
            <script defer src="js/script3.js"></script>

* 따라서 위의 예제의 경우에는 jquery.js -> script2.js -> script3.js 의 순서가 보장됩니다.

##### 요약
* 만약 scirpt들이 각각의 스크립트에 의존하지 않고 독립적으로 파싱되도 상관없다면, async 를 사용합니다.
* 먄약 sciprt들이 의존하고 하나의 스크립트가 파싱될때까지 기다려야 한다면, defer 를 사용하고 각각의 `<script>` 태그들을 실행되길 원하는 순서대로 작성합니다.

---

### 이해가 어려웠던 부분에 대한 대략적인 정리
#### 1. async 속성 사용이 필요한 이유
*  HTML문서 도중에 스크립트가 실행되거나, (2) 스크립트가 HTML 로딩 후에 실행되는 방식은 한계가 있다.
    - 스크립트 내용이 실행될 때까지 스크립트 이후 HTML 문서 내용이 로드되지 않기 때문.
    - 스크립트 내에서 HTML 파싱 등 작업을 해줄 수도 있다. 그런데 후자의 방식에선 이 부분이 반영되지 않은 채 HTML이 로드되고, 스크립트는 로드 이후 맨 마지막 순서로 한번에 모든 작업을 처리한다. 따라서 속도 저하 위험이 있다.

#### 2. async & defer
* async는 페이지가 렌더링과 스크립트 다운로드가 같이 이루어지며, 스크립트의 다운로드가 완료되는 즉시 실행되도록 한다.
* 단, 여러 스크립트 간 실행 순서는 보장하지 않아, 스크립트가 서로 의존하지 않을 때 적절하다.
* defer는 순서대로 다운로드 한 후, 모든 스크립트의 내용이 다운로드 되었을 때 실행된다.
* 나는 다음과 같이 이해해보았다.

            예시 1)
            <script defer src="A.js"></script>
            <script defer src="B.js"></script>

            1. `B.js`라는 스크립트: `test`라는 버튼을 클릭하여 글자를 출력하는 기능
            2. `A.js`: `test`라는 버튼을 생성하는 기능
* 위와 같을 때, async 방식으론 순서가 보장되지 않기 때문에 `B.js`가 먼저 실행될 수도 있는 것이며, 에러 발생으로 이어질 수도 있다.
* 이럴 땐 defer 방식이 적절하다.

            예시 2)
            <script async src="A.js"></script>
            <script async src="B.js"></script>

            1. `A.js`라는 스크립트: 누르면 새로고침하는 `test1` 버튼을 생성하는 기능.
            2. `B.js`: 누르면 질문 prompt가 발생하는 `test2`라는 버튼을 생성하는 기능
* 위와 같을 땐 순서 보장이 큰 의미가 없기 때문에, async 방식이 적절하다.
    - 단순화한 예시라 억지스러우나, 일단 이 정도만 이해하고 넘어가자.